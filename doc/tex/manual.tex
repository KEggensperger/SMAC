\documentclass[11pt,letterpaper,oneside]{article}
\include{fh_commands}
\usepackage{fullpage}
\usepackage{setspace}
\usepackage{subfiles}
\usepackage{graphicx}
\usepackage{color}
%%\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{probsoln}
\PSNrandseed{\time}
\newcommand{\note}[1]{}
% comment the next line to turn off notes
\renewcommand{\note}[1]{~\\\frame{\begin{minipage}[c]{\textwidth}\vspace{2pt}\center{#1}\vspace{2pt}\end{minipage}}\vspace{3pt}\\}


\begin{document}

\title{Manual for SMAC version \input{version}}

\author{
Frank~Hutter \& Steve~Ramage\\
Department of Computer Science\\
University of British Columbia\\
Vancouver, BC\ \ V6T~1Z4, Canada\\
\texttt{\{hutter,seramage\}@cs.ubc.ca}
}


\maketitle

\tableofcontents

\subfile{manual-intro}
\input{diff-pils-smac}
  
\section{Commonly Used Options}
\subfile{commonly-used-options}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\section{File Format Reference} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subfile{file-formats}


\section{Wrappers}
\subfile{wrapper}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Interpreting SMAC's Output}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subfile{output}
%%\input{file-formats}
 
\section{Developer Reference}

\subfile{dev-ref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Acknowledgements}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We are indebted to Jonathan Shen for porting our random forest code from C to Java in preparation for a Java port of all of SMAC. Alexandre Fr\'echette and Chris Thornton for their constant feedback and patches to SMAC.  We would also like to thank Marius Schneider for many valuable early bug reports and suggestions for improvements. 

%%%%
% Steve Ramage flipped a coin on August 3rd, witnessed by Alex Fr\'echette who called Tails, and it landed tails so he goes first
%%%


\renewcommand{\bibsection}{\section{References}}
\bibliographystyle{apalike}
\bibliography{short,frankbib}


\section{Appendix}
\subsection{Return Codes}

\begin{table}[h]
\begin{tabular}{| c | c | c |}
\hline
Value & Error Name & Description \\
\hline
\hline
0 & \textbf{Success} & Everything completed successfully \\
\hline
1 & \textbf{Parameter Error} & There was a problem with the input arguments or files  \\
\hline
2 & \textbf{Trajectory Divergence} & For some reason SMAC has taken a unexpected path \\

& & (\eg{} SMAC executes a run that does not match a run \\
& & in the \textbf{-~$\!\!$-runHashCodeFile}) \\
\hline
3 & \textbf{Serialization Exception} & A problem occurred when saving or restoring state \\
\hline
255 & \textbf{Other Exceptions} & Some other error occurred \\
\hline
\end{tabular}
\end{table}

\textsc{NOTE:} All error conditions besides 255 are fixed. However in future some exceptions that previously reported 255 may be changed to a non 255 value as needed / requested
\\
\\
\\
\\
\\
\\
\subsection{Version History of Java SMAC}
	\begin{description}
		\item[Version 2.00 (Aug-2012)] First Internal Release of Java SMAC (this is a port and extension of the original Matlab version).
		\item[Version 2.02 (Oct-2012)] First Public Release of SMAC v2 and contained many fixes from the previous release.
		\item[Version 2.04 (Dec-2012)] Second Release of Java SMAC including the following improvements:
			\begin{enumerate}
			\item Validation file output times consistent with Tuner Times
			\item Some \textbf{INFO} log statements have been moved to \textbf{DEBUG} and some \textbf{DEBUG} to \textbf{TRACE}
			\item Added support for verifying whether responses of SAT and UNSAT are consistent with Instance Specific Information see \textbf{-$~\!$-verifySAT} option for more information
			\item Added support for the SMAC\_MEMORY environment variable to control how much RAM (in MB) SMAC will use when  executed via the supplied shell scripts. 
			\item Context is now added to the state folders to make it easier to debug issues later, to disable consult the \textbf{-$~\!$-saveContext} option.
			\item Greatly improved memory usage in State Serialization code, and now we free the existing model prior to building a new one, so for some JVMs this may improve memory usage.
			\end{enumerate}

			\item[Version 2.04.01 (Feb-2013)] Minor Bug Fix of Java SMAC
				\begin{enumerate}
 			\item Added option to validate over training set instances 
			\item Can now use $<$DEFAULT$>$ as a configuration to validate against
			\item Fixed bug where \textbf{TIMEOUT} runs below our requested cutoff time are not counted properly when considering incumbent changes
			\item Can now specify the initial incumbent with the \textbf{-$~\!$-initialIncumbent} option.
			\item Wallclock time is now saved in the trajectory file instead of -1
			\item FAQ Improvements
			\item Git commit hash is now documented in Manual, FAQ, and Version strings
			\item \textbf{(BETA)} Support for bash auto-completion of arguments for \texttt{smac} and \texttt{smac-validate}. You can load the file by running: 
\begin{verbatim}
. ./util/bash_autocomplete.sh
\end{verbatim}

			\end{enumerate}

			 \item[Version 2.04.02 (Aug-2013)] Minor Bug Fix of Java SMAC
	              \begin{enumerate}
                     \item Incumbent Performance now displayed when validation is turned off.
                     \item \textbf{-$~\!$-runtimeLimit} option is no longer just for show.
                  \end{enumerate}

			 \item[Version 2.06.00 (Aug-2013)] Significant Feature Enhancements
	              \begin{enumerate}
	              	 \item New \texttt{algo-test} utility allows easy invocation of wrappers.
	              	 \item New \texttt{verify-scenario} utility preforms extra validation on scenario files.
                     \item Scenario now ends if the configuration space is exhausted
					 \item SMAC now lets you search only a subspace for good configurations
					 \item Validation output formats improved with headers
					 \item Option to always compare with the initial incumbent (to prevent an early poor choice from derailing the run) (See \textbf{-$~\!$-always-run-initial-config})
					 \item SMAC reports an error if runs give different answers for \textbf{SAT} and \textbf{UNSAT} now
					 \item New \textbf{-$~\!$-restore-scenario} option to make restoring scenarios easier
					 \item New \textbf{-$~\!$-warmstart} option makes it possible to preload the model with additional SMAC runs.
					 \item Can now set seeds to different parts of SMAC using \textbf{-S}
					 \item Runtime Statistics and Termination Reasons now rewritten
					 \item New validation options \textbf{-$~\!$-validate-all}, \textbf{-$~\!$-validate-only-if-tunertime-reached} (See the validation options for all of them)
					 \item SMAC now checks limits \textit{before} scheduling a run, rather than immediately after the run as in previous versions. (This means that if the last run went over, but changed the incumbent it will be logged.)
					 \item Instances can now be ordered deterministically (that is in the order they are declared in the instance file via \textbf{-$~\!$-determinstic-instance-ordering}.
					 \item Usage improved via new help levels which are displayed with \textbf{-$~\!$-help-level} and new usage screens.
					 \item Improvements to bash auto completion.
					 \item Target Algorithm Evaluators now take options.
					 \item Fixes for CPU Time calculation in SMAC.
					 \item Example scenarios cleaned up, new ones provided.
					 \item SMAC should be more forgiving with relative paths in a scenario file.
					 \item Default option files now supported (SMAC will read from \texttt{~/.aclib/smac.opt}, \texttt{~/.aclib/tae.opt} and \texttt{~/.aclib/help.opt}. It will also read from defaults for plugins that are available.
					 \item Rungroup name is now configurable.
					 \item Logging of some objects is cleaned up.
					 \item Windows Startup scripts, and improved Unix start up scripts.
					 \item Fixed lock-up issue with wrappers launching unterminating subprocesses.
					 \item Fixed ConvergenceException error message.
					 \item Options now have a primary non-camel case format.
					 \item Manual now has a basic options section, before listing all the options.
					 \item Significant API changes to the Target Algorithm Evaluators so previous plugins will need to be refactored (and another change will come either in v2.06 or v2.08).
					 \item SMAC will now match capitalization of words in the Result String of wrappers.
					 \item New \textbf{-$~\!$-validation-seed} option should cause the validation at the end of SMAC to behave the same as the stand-alone utility.
                  \end{enumerate}

			\item[Version 2.06.01 (Oct-2013)] Minor Bug Fix Release of Java SMAC
	              \begin{enumerate}
	              	 \item Fixed a bug introduced in 2.06.00 that caused validation to be performed against the training instance distribution instead of the test instance distribution.
                     \item Default acquisition function for solution quality optimization is now Expected Improvement (instead of Exponential Expected Improvement).
                     \item Fixed exception if Scenario file doesn't have extension.
                     \item New option \textbf{-$~\!$-terminate-on-delete} will cause SMAC to abort the procedure before the next set of runs (as if it had hit it's CPU time limit) if the file specified is deleted.
                     \item New option \textbf{-$~\!$-kill-runs-on-file-delete} will cause SMAC to kill any runs in progress . This option should be used with care, as it may cause SMAC to select the wrong incumbent, and it should always be used with \textbf{-$~\!$-terminate-on-delete}.
                     \item New option \textbf{-$~\!$-save-runs-every-iteration} will cause SMAC to output the runs and results file necessary to restore state every run. This is useful if your cluster or environment is particularly unreliable. It should \textsc{NOT} be used when runtimes in the scenario can grow very small as the amount of time SMAC will spend writing to disk loosely \footnote{Assuming the number of iterations scales linearly with the number of runs.} changes from $O(n)$ to $O(n^2)$, where $n$ is the number of runs it performs.
                     \item If SMAC is shutting down for an unexpected reason (e.g. \texttt{OutOfMemoryError} ,or it received a \texttt{SIGTERM}), SMAC will now try its best to write a final batch of state data with the "SHUTDOWN" prefix. \\
                      \textsc{Note:} This state may be corrupted for a variety of reasons, and even if it is written correctly you may not be able to restore it properly as the snap shot may be from the middle of an iteration.
                     \item Fixed typo in error message that mistakenly reported that instances where missing, when in fact it was the test instances that were missing.                     
                  \end{enumerate}
                  
          \item[Version 2.06.02 (TBD)] Minor Bug Fix Release of Java SMAC
          	\begin{enumerate}
          	\item New \texttt{sat-check} utility allows determination of the satisfiability for each instance of a instance file.
          		\item Environment variable \textbf{ACLIB\_CONCURRENT\_TASK\_ID} is now set when executing the wrapper, containing an index into the number of concurrent jobs. This is primarily used to allow the wrapper to determine CPU affinities correctly. See the wrapper section for more information.
          		\item Runtime Statistics are now printed less often.
          		\item New Target Algorithm Evaluator implementation allows integrating with a TAE using UDP (more to come).
          		\item Implemented a work around to a bug where configurations with censored early runs could become the incumbent erroneously. It's still suboptimal, but in fact it probably would never happen. See Known Issue \#1 in section \ref{known-issues}.
          		\item Validation rounding mode now changes the number of runs on deterministic runs, or runs with set problem instance seed pairs.
          		\item New option \textbf{-$~\!$-cli-kill-by-environment-cmd} allows terminating all processes by an environment variable. See section \ref{sec:exec-env} for more information.
          		\item Target algorithms no longer see quoted arguments for parameter values. The option \textbf{-$~\!$-cli-call-params-with-quotes} can be used to get the old behaviour back, this option will likely be removed in future.
          		\item New option \textbf{-$~\!$-quick-saves} controls whether to make any quick save states or not.
          		\item New option \textbf{-$~\!$-intermediary-saves} controls whether to many any save states at all while SMAC is running (if false SMAC will still save information at the end)
          		\item After validation SMAC prints correct termination reason message.
          		\item Standardized scenario options (no new ones), but scenario options can be used in ParamILS versions 2.3.7 and later.
          	\end{enumerate}
          	

	\end{description}
\subsection{Known Issues}
\label{known-issues}
\begin{enumerate}
\item In a rare case, configurations that are reinspected by SMAC after initially being rejected may continue their challenge when they otherwise shouldn't. If the configuration continues it's challenges successfully, prior to being the incumbent we will presently check all the runs, which is strictly more expensive than necessary.
\item The state merge utility may crash if merging runs that don't have a run for every instance.
\item Using any alias for \textbf{-$~\!$-showHiddenParameters}, \textbf{-$~\!$-help}, or \textbf{-$~\!$-version} as values to other arguments (\eg{ Setting -$~\!$-runGroupName -$~\!$-help}) does not parse correctly (This is unlikely to be fixed until someone complains).
\item Using large parameter values in continuous integral parameters, may cause loss of precision, and or crashes if the values are too big.
\item On older versions of Java ($<$1.6.0\_23), SMAC  may get an IOException with Out Of Memory when trying to execute the target algorithms
\item Auto detecting of iterations break if some runs and results files are missing, the work around is to remove some of the .obj files that don't have a runs and results file that is greater than or equal to them. (The quick object files internally store there iteration, and you'd have to check the logs to see what they correspond to).
\item ArrayOutOfBoundsException occurs if not all instances have features
\item \textbf{-$~\!$-num-seeds-per-test-instance} and \textbf{-$~\!$-num-test-instances} are both broken currently and will probably be removed in the future.
\item SMAC will now terminate all outstanding runs when exiting prematurely (for instance due to \textbf{CTRL+C})
\end{enumerate}

\clearpage


\subsection{Basic Options Reference}
The following sections outline only the basic options
\label{sec:options-basic-ref}
\subfile{options-basic-ref}


\clearpage

\subsection{Complete Options Reference}
\label{sec:options-ref}
\subfile{options-ref}

\end{document}

